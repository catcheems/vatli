<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thực hành: Đo gia tốc rơi tự do</title>
<style>
body {font-family: 'Verdana', sans-serif; background: #fff8f0; margin:0; padding:20px; color:#444}
.container{max-width:900px;margin:20px auto;background:#f0f0f5;padding:20px;border-radius:15px;box-shadow:0 6px 20px rgba(0,0,0,0.12)}
h1{text-align:center;color:#d35400; margin-bottom:20px}
table{width:100%;border-collapse:collapse;margin-top:15px; background:#fff}
th,td{border:1px solid #aaa;padding:10px;text-align:center}
input[type=number]{width:90%;padding:5px;border:1px solid #999;border-radius:5px}
button{margin-top:12px;padding:10px 16px;border:none;background:#e67e22;color:#fff;border-radius:10px;cursor:pointer; transition:0.3s}
button:hover{background:#cf711c}
button.secondary{background:#95a5a6}
#result{margin-top:15px;font-weight:600;color:#2c3e50}
#controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-top:12px}
#simWrap{display:flex;flex-direction:column;align-items:center;gap:8px;margin-top:15px}
canvas{background:#fefefe;border-radius:10px; border:1px solid #ccc}
.note{font-size:13px;color:#555;margin-top:6px}
</style>
</head>
<body>
<div class="container">
<h1>Thực hành: Đo gia tốc rơi tự do</h1>
<p class="note">Nhập chiều cao và 5 lần đo thời gian cho mỗi quãng đường s₁..s₅ (m, s)</p>
<table>
<tr><th>Quãng đường</th><th>Chiều cao (m)</th><th colspan="5">Thời gian đo (s) — 5 lần</th></tr>
<tr><td>s1</td><td><input id="h1" type="number" step="0.001" value="0.20"></td><td><input id="t1_1" type="number" step="0.001" value="0.202"></td><td><input id="t1_2" type="number" step="0.001" value="0.198"></td><td><input id="t1_3" type="number" step="0.001" value="0.200"></td><td><input id="t1_4" type="number" step="0.001" value="0.205"></td><td><input id="t1_5" type="number" step="0.001" value="0.201"></td></tr>
<tr><td>s2</td><td><input id="h2" type="number" step="0.001" value="0.40"></td><td><input id="t2_1" type="number" step="0.001" value="0.308"></td><td><input id="t2_2" type="number" step="0.001" value="0.305"></td><td><input id="t2_3" type="number" step="0.001" value="0.310"></td><td><input id="t2_4" type="number" step="0.001" value="0.307"></td><td><input id="t2_5" type="number" step="0.001" value="0.309"></td></tr>
<tr><td>s3</td><td><input id="h3" type="number" step="0.001" value="0.60"></td><td><input id="t3_1" type="number" step="0.001" value="0.349"></td><td><input id="t3_2" type="number" step="0.001" value="0.352"></td><td><input id="t3_3" type="number" step="0.001" value="0.350"></td><td><input id="t3_4" type="number" step="0.001" value="0.348"></td><td><input id="t3_5" type="number" step="0.001" value="0.351"></td></tr>
<tr><td>s4</td><td><input id="h4" type="number" step="0.001" value="0.80"></td><td><input id="t4_1" type="number" step="0.001" value="0.402"></td><td><input id="t4_2" type="number" step="0.001" value="0.399"></td><td><input id="t4_3" type="number" step="0.001" value="0.400"></td><td><input id="t4_4" type="number" step="0.001" value="0.405"></td><td><input id="t4_5" type="number" step="0.001" value="0.401"></td></tr>
<tr><td>s5</td><td><input id="h5" type="number" step="0.001" value="1.00"></td><td><input id="t5_1" type="number" step="0.001" value="0.451"></td><td><input id="t5_2" type="number" step="0.001" value="0.449"></td><td><input id="t5_3" type="number" step="0.001" value="0.452"></td><td><input id="t5_4" type="number" step="0.001" value="0.450"></td><td><input id="t5_5" type="number" step="0.001" value="0.453"></td></tr>
</table>
<div id="controls">
<button onclick="calculateG()">Tính toán</button>
<button class="secondary" onclick="resetExample()">Reset ví dụ</button>
<label for="simSelect">Chọn quãng đường mô phỏng:</label>
<select id="simSelect"><option value="1">s1</option><option value="2">s2</option><option value="3">s3</option><option value="4">s4</option><option value="5">s5</option></select>
<button onclick="startSim()">Bắt đầu mô phỏng</button>
<button class="secondary" onclick="stopSim()">Dừng</button>
</div>
<div id="result"></div>
<div id="simWrap">
<canvas id="simCanvas" width="300" height="420"></canvas>
<div class="note">Quả cầu mô phỏng rơi từ chiều cao tương ứng quãng đường được chọn. Nếu đã tính, mô phỏng dùng g̅.</div>
</div>
</div>
<script>
let lastResult=null;
function mean(arr){return arr.reduce((a,b)=>a+b,0)/arr.length}
function sdSample(arr){if(arr.length<2)return 0;const m=mean(arr);return Math.sqrt(arr.reduce((s,x)=>s+(x-m)*(x-m),0)/(arr.length-1));}
function calculateG(){let allG=[];for(let i=1;i<=5;i++){let h=parseFloat(document.getElementById('h'+i).value);if(isNaN(h)||h<=0){document.getElementById('result').innerText='Quãng đường s'+i+' chưa hợp lệ.';return}let times=[];for(let j=1;j<=5;j++){let t=parseFloat(document.getElementById(`t${i}_${j}`).value);if(isNaN(t)||t<=0){document.getElementById('result').innerText=`Thời gian t${i}_${j} chưa hợp lệ.`;return}times.push(t)}allG.push(...times.map(t=>2*h/(t*t)))}
const gBar=mean(allG); const deltaG=sdSample(allG)/Math.sqrt(allG.length); lastResult={gBar};
document.getElementById('result').innerHTML=`<div>g̅ = ${gBar.toFixed(4)} m/s²</div><div>Δg = ${deltaG.toFixed(4)} m/s²</div><div><strong>g = ${gBar.toFixed(4)} ± ${deltaG.toFixed(4)} m/s²</strong></div>`;}
function resetExample(){const h=[0.2,0.4,0.6,0.8,1];const t=[[0.202,0.198,0.2,0.205,0.201],[0.308,0.305,0.31,0.307,0.309],[0.349,0.352,0.35,0.348,0.351],[0.402,0.399,0.4,0.405,0.401],[0.451,0.449,0.452,0.45,0.453]];for(let i=1;i<=5;i++){document.getElementById('h'+i).value=h[i-1];for(let j=1;j<=5;j++)document.getElementById(`t${i}_${j}`).value=t[i-1][j-1]}lastResult=null;document.getElementById('result').innerHTML='';}
const canvas=document.getElementById('simCanvas'); const ctx=canvas.getContext('2d'); let animId=null, y=0, v=0;
function worldToPixel(h){const ground=canvas.height-40, top=20, maxH=1.5; const scale=(ground-top)/maxH; return ground-h*scale;}
function startSim(){const idx=parseInt(document.getElementById('simSelect').value); const h=parseFloat(document.getElementById('h'+idx).value); if(isNaN(h)||h<=0){alert('Chiều cao chọn không hợp lệ');return} const g=lastResult?lastResult.gBar:9.80665; const groundPx=canvas.height-40; const top=20; const maxH=1.5; const scale=(groundPx-top)/maxH; y=worldToPixel(h); v=0; let tPrev=null;
function step(ts){if(!tPrev)tPrev=ts; const dt=(ts-tPrev)/1000; tPrev=ts; v+=g*dt; const dy=v*dt*scale; y+=dy; ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle='#fdf6e3'; ctx.fillRect(0,groundPx,canvas.width,40); ctx.beginPath(); ctx.moveTo(40,20); ctx.lineTo(40,groundPx); ctx.strokeStyle='#e6b98f'; ctx.stroke(); ctx.beginPath(); ctx.arc(canvas.width/2,y,14,0,Math.PI*2); ctx.fillStyle='#e67e22'; ctx.fill(); if(y+14<groundPx){animId=requestAnimationFrame(step)} else{cancelAnimationFrame(animId);animId=null}}
if(animId) cancelAnimationFrame(animId); animId=requestAnimationFrame(step);}
function stopSim(){if(animId){cancelAnimationFrame(animId);animId=null}}
resetExample();
</script>
</body>
</html>